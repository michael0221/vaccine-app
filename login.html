<!DOCTYPE html>
<html lang="en">
	<!--begin::Head-->
	<head>
    	<title>Vaccine System | Login</title>
		<meta charset="utf-8" />
		<meta name="description" content="Learn the latest technologies and master in-demand skills in a hands-on, learning environment led by expert instructors.">
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--begin::Fonts-->
    	<link rel="shortcut icon" type="image/x-icon" href="landing/assets/pngwing.com (2).png">
		<!--end::Fonts-->
		<!--begin::Global Stylesheets Bundle(used by all pages)-->
		<link href="dashboard/dist/assets/plugins/global/plugins.bundle.css" rel="stylesheet" type="text/css" />
		<link href="dashboard/dist/assets/css/style.bundle.css" rel="stylesheet" type="text/css" />
		<!--end::Global Stylesheets Bundle-->

		<style>
			.text-primary, .link-primary {
				color: #0066ff  !important;
			}

			.btn-primary, .form-check-input:checked {
				color: #FFFFFF!important;
				border-color: #0066ff !important;
				background-color: #0066ff !important;
			}

			.btn.btn-primary:hover, .btn.btn-primary:hover:not(.btn-active) {
				color: #FFFFFF!important;
				background-color: #004fc6 !important;
				border-color: #004fc6!important;
			}

			::-webkit-input-placeholder { /* Chrome/Opera/Safari */
				font-size: 13px;
				font-weight: 400!important;
			}
		</style>
	</head>
	<!--end::Head-->
	<!--begin::Body-->

	<body id="kt_body" class="bg-body">
		<!--begin::Main-->
		<!--begin::Root-->
		<div class="d-flex flex-column flex-root">
			<!--begin::Authentication - Sign-up -->
			<div class="d-flex flex-column flex-lg-row flex-column-fluid">
				
				<!--begin::Body-->
				<div class="d-flex flex-column flex-lg-row-fluid py-10">
					<!--begin::Content-->
					<div class="d-flex flex-center flex-column flex-column-fluid">
						<!--begin::Wrapper-->
						<div class="w-lg-600px px-10 px-lg-15 pb-15 pt-10 mx-auto sign_in_form">
							<!--begin::Form-->
							<form class="form w-100" novalidate="novalidate">
								<!--begin::Heading-->
								<div class="mb-6">
									<div class="header-logo mb-20">
										<a href="index.html">
											<img class="dark-logo" src="landing/assets/pngwing.com (2).png" width="50px" alt="ITA Logo">
										</a>
									</div>
									<!--begin::Title-->
									<h1 class="text-dark mb-3 display-2 fw-boldest fs-2qx">Sign In</h1>
									<!--end::Title-->
									<!--begin::Link-->
									<div class="row">
										<div class="col-md-6 col-sm-12 single-input mb-30">
											<p class="fs-7 mb-1">Sign in to your account</p>
										</div>
										<div class="col-md-6 col-sm-12 single-input mb-30 text-start text-lg-end">
											<p class="fs-7">Don't have an account?
												<a href="signup.html" class="link-primary">Sign up</a>
											</p>
										</div>
									</div>
									<!--end::Link-->
								</div>
								<!--end::Heading-->
								
								<!--begin::Input group-->
								<div class="fv-row mb-7">
									<label for="username" class="form-label fw-bolder text-dark fs-6">Username</label>
									<input class="form-control form-control-lg form-control-solid" type="text" placeholder="Enter your username" id="username" name="username" autocomplete="off">
								</div>
								<!--end::Input group-->
								<!--begin::Input group-->
								<div class="fv-row mb-7">
									<!--begin::Col-->
									<label for="password" class="form-label fw-bolder text-dark fs-6">Password</label>
									<input class="form-control form-control-lg form-control-solid" type="password" placeholder="Enter password" id="password" name="password" autocomplete="off">
									<!--end::Col-->
								</div>
								<!--end::Input group=-->
								<!--begin::Input group-->
								<div class="fv-row mb-10">
									<label class="form-check form-check-custom form-check-solid form-check-inline ">

										<div class="col-sm-6 remember-me-wrap">
											<input class="form-check-input" type="checkbox" name="toc" value="1">
											<span class="form-check-label fs-7">Remember me next time</span>
										</div>

										<div class="col-sm-6 forgot-password-wrap text-end">
											<span>
												<a href="reset_pwd.html" class="forgot-password fs-7 text-danger">Forgot Password?</a>
											</span>
										</div>

									</label>
								</div>
								<!--end::Input group-->

								<!--begin::Actions-->
								<div class="text-center">
									<button type="button" id="sign_in_submit" onclick="login()"
										class="btn btn-lg btn-primary w-100 rounded fw-normal">
										<span class="indicator-label">Login to dashboard</span>
										<span class="indicator-progress">Please wait...
											<span class="spinner-border spinner-border-sm align-middle ms-2"></span></span>
									</button>
								</div>
								<!--end::Actions-->
							</form>
							<!--end::Form-->
						</div>
						<!--end::Wrapper-->
					</div>
					<!--end::Content-->
					<!--begin::Footer-->
					<div class="d-flex flex-center flex-wrap fs-6 p-5 pb-0 d-none">
						<!--begin::Links-->
						<div class="d-flex flex-center fw-bold fs-6">
							<a href="https://keenthemes.com" class="text-muted text-hover-primary px-2" target="_blank">About</a>
							<a href="https://devs.keenthemes.com" class="text-muted text-hover-primary px-2" target="_blank">Support</a>
							<a href="https://1.envato.market/EA4JP" class="text-muted text-hover-primary px-2" target="_blank">Purchase</a>
						</div>
						<!--end::Links-->
					</div>
					<!--end::Footer-->
				</div>
				<!--end::Body-->

				<!--begin::Aside-->
				<div class="d-none d-lg-flex flex-column flex-lg-row-auto w-xl-500px positon-xl-relative bgi-position-x-center bgi-size-cover" style="background-image:url(landing/assets/hosein-zanbori-pLi9Gh547ns-unsplash.jpg)">
					<!--begin::Wrapper-->
					<div class="d-flex flex-column position-xl-fixed bottom-0 w-xl-500px scroll-y">

					</div>
					<!--end::Wrapper-->
				</div>
				<!--end::Aside-->
			</div>
			<!--end::Authentication - Sign-up-->
		</div>
		<!--end::Root-->
		<!--end::Main-->
		<!--begin::Javascript-->
		<script>var hostUrl = "dashboard/dist/assets/";</script>
		<!--begin::Global Javascript Bundle(used by all pages)-->
		<script src="dashboard/dist/assets/plugins/global/plugins.bundle.js"></script>
		<script src="dashboard/dist/assets/js/scripts.bundle.js"></script>
		<script src="dashboard/dist/assets/js/common.js"></script>
		<!-- <script src="dashboard/dist/assets/js/fingerprint.min.js"></script> -->
		<!--end::Global Javascript Bundle-->
		<!--begin::Page Custom Javascript(used by this page)-->
		<!-- <script src="dashboard/dist/assets/js/custom/authentication/sign-up/general.js"></script> -->
		<!--end::Page Custom Javascript-->
		<!--end::Javascript-->

		<script>

			$(document).ajaxStop(function () {
				// $.unblockUI();
			});
			 
			let username;
			let password;

			function login() {
				var username = $("#username").val();
				var password = $("#password").val();
				if (username == "") {
					toastr["error"]("Enter username");
				} else if (password == "") {
					toastr["error"]("Enter password");
				} else {
					$("#sign_in_submit").html("Processing...");
					// $.blockUI({
					//   message:
					//     '<div class="spinner-grow text-danger" role="status"><span class="visually-hidden"></span></div>',
					// });
					$.ajax({
						url: "https://covid-vaccine-system.herokuapp.com/auth/login/",
						data: {
							username: username,
							password: password,
							
						},
						type: "POST",
						success: function (response) {
							console.log(response);
							try {
								// var json = JSON.parse(response);
								// console.log(json);
								// var page = json.data.page;
								if (response.status == 200) {
									var ret = {
										token: response.token,
									};
									window.location.href = "amin/dist/index.html" + "?" + $.param(ret);
									// window.location.href = "admin/dist/index.html"
									// console.log("michael")

									// window.location.href = page + "?" + $.param(ret);
								} else {
									// $.unblockUI();
									// callSweetMsg(json, "eCampus Portal", "error");
									// Swal.fire({
									// 	title: "ITA Portal",
									// 	html: json.status,
									// 	icon: "error",
									// 	buttonsStyling: true,
									// 	confirmButtonText: "Ok, got it!",
									// 	customClass: { confirmButton: "btn-sm btn-primary" },
									// });
									// $("#sign_in_submit").html("Log in to dashboard");
								}
							} catch (e) {
								console.log(e.message);
							}
						},
					});
				}
			}

			function forgotpassword() {
			username = $("#username").val();
			dopost({
				url: api_link + "route/users.php",
				data: {
					action: "forgotpassword",
					username: username,
				},
				type: "POST",
				success: function (response) {
					try {
						var json = JSON.parse(response);
						if (json.statuscode == 0) {
							// $.unblockUI();
							// callSweetMsg(json,"eCampus Portal","success");
							Swal.fire({
								title: "ITA Portal",
								html: json.status,
								icon: "success",
								buttonsStyling: true,
								confirmButtonText: "Ok, got it!",
								customClass: { confirmButton: "btn-sm btn-primary" },
							});;
						} else {
							callSweetMsg(json, "ITA Portal", "error");
						}
					} catch (e) {
						console.log(e.message);
					}
				},
			});
		}

		</script>

	</body>
	<!--end::Body-->

</html>