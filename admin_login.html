<!DOCTYPE html>
<html lang="en">
	<!--begin::Head-->
	<head>
        <!-- <base href="admin/dist/"> -->
		<title>ITA | Admin</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta property="og:locale" content="en_US" />
		<meta property="og:type" content="article" />
		<meta property="og:title" content="Metronic - Bootstrap 5 HTML, VueJS, React, Angular &amp; Laravel Admin Dashboard Theme" />
		<meta property="og:url" content="https://keenthemes.com/metronic" />
		<meta property="og:site_name" content="Keenthemes | Metronic" />
		<link rel="canonical" href="https://preview.keenthemes.com/metronic8" />
		<link rel="shortcut icon" href="admin/dist/assets/media/logos/favicon.ico" />
		<!--begin::Fonts-->
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" />
		<!--end::Fonts-->
		<!--begin::Global Stylesheets Bundle(used by all pages)-->
		<link href="admin/dist/admin/dist/assets/plugins/global/plugins.bundle.css" rel="stylesheet" type="text/css" />
		<link href="admin/dist/assets/css/style.bundle.css" rel="stylesheet" type="text/css" />
		<!--end::Global Stylesheets Bundle-->
	</head>
	<!--end::Head-->
	<!--begin::Body-->
	<body id="kt_body" class="bg-body">
		<!--begin::Main-->
		<!--begin::Root-->
		<div class="d-flex flex-column flex-root">
			<!--begin::Authentication - Sign-in -->
			<div class="d-flex flex-column flex-column-fluid bgi-position-y-bottom position-x-center bgi-no-repeat bgi-size-contain bgi-attachment-fixed" >
				<!--begin::Content-->
				<div class="d-flex flex-center flex-column flex-column-fluid p-10 pb-lg-20">
					<!--begin::Logo-->
					<a href="../../demo1/dist/index.html" class="mb-12">
						<img alt="Logo" src="landing/assets/images/logo.png" class="h-40px" />
					</a>
					<!--end::Logo-->
					<!--begin::Wrapper-->
					<div class="w-lg-500px bg-body rounded shadow-sm p-10 p-lg-15 mx-auto">
						<!--begin::Form-->
						<form class="form w-100" novalidate="novalidate" id="kt_sign_in_form" >
							<!--begin::Heading-->
							<div class="text-center mb-10">
								<!--begin::Title-->
								<h1 class="text-dark mb-3">Sign In to ITA</h1>
								<!--end::Title-->
							</div>
							<!--begin::Heading-->
							<!--begin::Input group-->
							<div class="fv-row mb-10">
								<!--begin::Label-->
								<label class="form-label fs-6 fw-bolder text-dark">Email</label>
								<!--end::Label-->
								<!--begin::Input-->
								<input class="form-control form-control-lg form-control-solid" type="text" id="username" name="email" />
								<!--end::Input-->
							</div>
							<!--end::Input group-->
							<!--begin::Input group-->
							<div class="fv-row mb-10">
								<!--begin::Wrapper-->
								<div class="d-flex flex-stack mb-2">
									<!--begin::Label-->
									<label class="form-label fw-bolder text-dark fs-6 mb-0">Password</label>
									<!--end::Label-->
									<!--begin::Link-->
									<!-- <a href="#" class="link-primary fs-6 fw-bolder">Forgot Password ?</a> -->
									<!--end::Link-->
								</div>
								<!--end::Wrapper-->
								<!--begin::Input-->
								<input class="form-control form-control-lg form-control-solid" id="password" type="password" name="password" />
								<!--end::Input-->
							</div>
							<!--end::Input group-->
							<!--begin::Actions-->
							<div class="text-center">
								<!--begin::Submit button-->
								<button type="submit" id="kt_sign_in_submit" class="btn btn-lg btn-primary w-100 mb-5" onclick="login()">
									<span class="indicator-label">Continue</span>
									<span class="indicator-progress">Please wait...
									<span class="spinner-border spinner-border-sm align-middle ms-2"></span></span>
								</button>
								<!--end::Submit button-->
							</div>
							<!--end::Actions-->
						</form>
						<!--end::Form-->
					</div>
					<!--end::Wrapper-->
				</div>
				<!--end::Content-->
				<!--begin::Footer-->
				<div class="d-flex flex-center flex-column-auto p-10">
					<!--begin::Links-->
					<div class="d-flex align-items-center fw-bold fs-6">
						<a href="#" class="text-muted text-hover-primary px-2">About</a>
						<a href="#" class="text-muted text-hover-primary px-2">Contact Us</a>
					</div>
					<!--end::Links-->
				</div>
				<!--end::Footer-->
			</div>
			<!--end::Authentication - Sign-in-->
		</div>
		<!--end::Root-->
		<!--end::Main-->
		<!--begin::Javascript-->
		<!-- <script>var hostUrl = "admin/dist/assets/";</script> -->
		<!--begin::Global Javascript Bundle(used by all pages)-->
		<script src="admin/dist/assets/plugins/global/plugins.bundle.js"></script>
		<script src="admin/dist/assets/js/scripts.bundle.js"></script>
		<script src="dashboard/dist/assets/js/common.js"></script>
		<!--end::Global Javascript Bundle-->
		<!--begin::Page Custom Javascript(used by this page)-->
		<!-- <script src="admin/dist/assets/js/custom/authentication/sign-in/general.js"></script> -->
		<!--end::Page Custom Javascript-->
		<!--end::Javascript-->
        <script>

			function login() {
				var username = $("#username").val();
				var password = $("#password").val();
				if (username == "") {
					toastr["error"]("Enter username");
				} else if (password == "") {
					toastr["error"]("Enter password");
				} else {
					$("#sign_in_submit").html("Processing...");
					// $.blockUI({
					//   message:
					//     '<div class="spinner-grow text-danger" role="status"><span class="visually-hidden"></span></div>',
					// });
					dopost({
						url: api_link + "route/auth.php",
						data: {
							action: "login",
							username: username,
							password: password,
						},
						type: "POST",
						success: function (response) {
                        	setItem('data', response);
							console.log(response);
							try {
								var json = JSON.parse(response);
								var page = json.data.page;
								if (json.statuscode == 0) {
									var ret = {
										sessionid: json.data.sessionid,
										userid: json.data.userid,
									};
									// window.location.href = "admin/dist/index.html" + "?" + $.param(ret);
									window.location.href = page + "?" + $.param(ret);
								} else {
									// $.unblockUI();
									// callSweetMsg(json, "eCampus Portal", "error");
									Swal.fire({
										title: "ITA Portal",
										html: json.status,
										icon: "error",
										buttonsStyling: true,
										confirmButtonText: "Ok, got it!",
										customClass: { confirmButton: "btn-sm btn-primary" },
									});
									$("#sign_in_submit").html("Log in to dashboard");
								}
							} catch (e) {
								console.log(e.message);
							}
						},
					});
				}
			}

        </script>
	</body>
	<!--end::Body-->
</html>